{% assign n_days = site.data.program.days | size -%}
{%- for day in site.data.program.days -%}
  <u>
    <b>{{ day.name }}</b>
  </u>
  <table border="1" cellpadding="5">
    <tr>
      <th>&nbsp;</th>
      {%- for room in day.rooms -%}
        <th>{{ room.name }}</th>
      {%- endfor -%}
    </tr>

    {%- for slot in day.slots -%}
      {% assign n_rooms = day.rooms | size -%}
      <tr>
        <td style="text-align: right;">{{ slot }}</td>
        {%- if day.roomless[slot] -%}
          <td colspan="{{ n_rooms }}" style="color: red;">{{ day.roomless[slot].title }}</td>
        {%- else -%}
          {%- for room in day.rooms -%}
            {%- assign talk = room.talks[slot] -%}
            {%- if talk and talk.placeholder -%}
            {%- elsif talk -%}
              <td rowspan="{{ talk.span || 1 }}"><b>{{ talk.presenter }}</b><br>{{ talk.title }}</td>
            {%- else -%}
              <td>&nbsp;</td>
            {%- endif -%}
          {%- endfor -%}
        {%- endif -%}
      </tr>
    {%- endfor -%}
  </table>
{%- endfor -%}

{{ content }}