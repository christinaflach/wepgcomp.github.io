<!--==============================
=            Schedule            =
===============================-->

<section class="section schedule" id="schedule">
	<div class="container">
		<div class="row">
			<div class="col-12">
				<div class="section-title">
					<h3>Programação do Evento</h3>
					<p>{{ page.schedule_preamble }}</p>
				</div>
			</div>
		</div>
		{% assign n_days = page.program.days | size -%}
		<div class="row">
			<div class="col-12">
				<div class="schedule-tab">
					<ul class="nav nav-pills text-center">
						{%- for day in page.program.days -%}
						<li class="nav-item">
							<a class="nav-link {% if forloop.index == 1 %}active{% endif %}" href="#{{ day.name | slugify }}" data-toggle="pill">
								{{ day.name }}
								<span>{{ day.date }}</span>
							</a>
						</li>
						{%- endfor -%}
					</ul>
				</div>
				<div class="schedule-contents bg-schedule">
					<div class="tab-content" id="pills-tabContent">

						{% for day in page.program.days %}
						{% assign n_rooms = day.rooms | size -%}
					  <div class="tab-pane fade show {% if forloop.index == 1 %}active{% endif %} schedule-item" id="{{ day.name | slugify }}">
							<table class="program-table">
								<tr class="program-header">
									<th class="col-time" style="width: 80px; padding-right: 20px;">&nbsp;</th>
									{%- for room in day.rooms -%}
										<th class="col-room" style="width: calc((100% - 80px)/{{ n_rooms }})">{{ room.name }}</th>
									{%- endfor -%}
								</tr>

								{%- for slot in day.slots -%} 
									<tr>
										<td class="time">{{ slot }}</td>
										{%- assign break_key = day.name | append: ', ' | append: slot -%}
										{%- assign break_ = page.program.breaks[break_key] -%}
										{%- if break_ -%}
											<td colspan="{{ n_rooms }}" class="all-rooms">{{ break_.title }}</td>
										{%- else -%}
											{%- for room in day.rooms -%}
												{%- assign talk_key = day.name | append: ', ' | append: room.name | append: ', ' | append: slot -%}
												{%- assign talk = page.program.talks[talk_key] -%}
												
												{%- if talk and talk.placeholder -%}
												{%- elsif talk -%}
													<td class="not-empty" rowspan="{{ talk.span || 1 }}">
														{%- capture talk_id -%}{{ day.name | append: '-' | append: room.name | append: '-' | append: slot | slugify }}{%- endcapture -%}
														<a href="#" style="color: black;" data-toggle="modal" data-target="#{{ talk_id }}">
															<b>{{ talk.presenter_short | default: talk.presenter }}</b> - {{ talk.title }}
														</a>

														<!-- Modal -->
														<div class="modal fade" id="{{ talk_id }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
															<div class="modal-dialog modal-lg" role="document">
																<div class="modal-content">
																	<div class="modal-header">
																		<h5 class="modal-title" id="exampleModalLabel">{{ talk.title }}</h5>
																		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																			<span aria-hidden="true">&times;</span>
																		</button>
																	</div>
																	<div class="modal-body">
																		<p><b>{{ talk.presenter }}</b></p>
																		<p>Orientação: {{ talk.advisor }}{% if talk.coadvisor and talk.coadvisor != '' %}, {{ talk.coadvisor }} {% endif %}</p>
																		<div>{{ talk.abstract }}</div>
																		{% for tag in talk.tags %}
																		<span class="badge badge-secondary">{{ tag }}</span>
																		{% endfor %}
																	</div>
																	<div class="modal-footer">
																		<button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
																	</div>
																</div>
															</div>
														</div>

													</td>
												{%- else -%}
													<td>&nbsp;</td>
												{%- endif -%}
											{%- endfor -%}
										{%- endif -%}
									</tr>
								{%- endfor -%}
							</table>
					  </div>
						{% endfor %}

					</div>
				</div>
				
			</div>
		</div>
	</div>
</section>

<!--====  End of Schedule  ====-->